YUI.add("moodle-atto_mathslate-button",function(e,t){var n="atto_mathslate";e.namespace("M.atto_mathslate").Button=e.Base.create("button",e.M.editor_atto.EditorPlugin,[],{_currentSelection:null,_getTeX:null,initializer:function(){this._groupFocus={};var e=this.get("iconurl");this.addButton({iconurl:e,callback:this._displayDialogue})},_displayDialogue:function(){var t=e.guid(),r=this.get("configurl"),i=this.get("host");this._currentSelection=i.getSelection();var s=i.getSelection();if(this._currentSelection===!1)return;var o=this.getDialogue({headerContent:M.util.get_string("pluginname",n),width:500},!0);o.set("bodyContent",'<div id="'+t+'"></div>'),o.show();var u=new M.tinymce_mathslate.Editor("#"+t,r);e.one("#"+t).addClass("mathslate-atto");var a=e.one("#"+t).appendChild(e.Node.create("<button>Cancel</button>")),f=e.one("#"+t).appendChild(e.Node.create("<button>Display TeX</button>")),l=e.one("#"+t).appendChild(e.Node.create("<button>Inline TeX</button>"));a.on("click",function(){o.hide()}),f.on("click",function(){o.hide(),i.setSelection(s),i.insertContentAtFocusPoint("\\["+u.output("tex")+"\\]"),this.markUpdated()}),l.on("click",function(){o.hide(),i.setSelection(s),i.insertContentAtFocusPoint("\\("+u.output("tex")+"\\)"),this.markUpdated()})}},{ATTRS:{configurl:{value:null},iconurl:{value:null}}})},"@VERSION@",{requires:["escape","moodle-tinymce_mathslate-editor"]});
